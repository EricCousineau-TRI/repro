$ ./repro.sh 
+ target=:conservative_resize_issue
+ echo '[ Good ]'
[ Good ]
+ bazel_run :conservative_resize_issue
+ bazel run -c dbg '--run_under=valgrind --tool=memcheck' :conservative_resize_issue
INFO: Found 1 target...
Target //bug/eigen_resize_dtor:conservative_resize_issue up-to-date:
  bazel-bin/bug/eigen_resize_dtor/conservative_resize_issue
INFO: Elapsed time: 1.817s, Critical Path: 1.50s

INFO: Running command line: /bin/bash -c 'valgrind --tool=memcheck bazel-bin/bug/eigen_resize_dtor/conservative_resize_issue '
==30529== Memcheck, a memory error detector
==30529== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.
==30529== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info
==30529== Command: /home/eacousineau/.cache/bazel/_bazel_eacousineau/4bfeaeef7a21f92da79b50fef77b3ca6/execroot/repro/bazel-out/clang-3.9-linux-dbg/bin/bug/eigen_resize_dtor/conservative_resize_issue
==30529== 
==30529== 
==30529== HEAP SUMMARY:
==30529==     in use at exit: 72,704 bytes in 1 blocks
==30529==   total heap usage: 9 allocs, 8 frees, 73,050 bytes allocated
==30529== 
==30529== LEAK SUMMARY:
==30529==    definitely lost: 0 bytes in 0 blocks
==30529==    indirectly lost: 0 bytes in 0 blocks
==30529==      possibly lost: 0 bytes in 0 blocks
==30529==    still reachable: 72,704 bytes in 1 blocks
==30529==         suppressed: 0 bytes in 0 blocks
==30529== Rerun with --leak-check=full to see details of leaked memory
==30529== 
==30529== For counts of detected and suppressed errors, rerun with: -v
==30529== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+ echo -e '\n\n\n'




+ echo '[ Bad ]'
[ Bad ]
+ bazel_run --copt=-DUSE_BAD :conservative_resize_issue
+ bazel run -c dbg '--run_under=valgrind --tool=memcheck' --copt=-DUSE_BAD :conservative_resize_issue
INFO: Found 1 target...
Target //bug/eigen_resize_dtor:conservative_resize_issue up-to-date:
  bazel-bin/bug/eigen_resize_dtor/conservative_resize_issue
INFO: Elapsed time: 1.755s, Critical Path: 1.42s

INFO: Running command line: /bin/bash -c 'valgrind --tool=memcheck bazel-bin/bug/eigen_resize_dtor/conservative_resize_issue '
==31170== Memcheck, a memory error detector
==31170== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.
==31170== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info
==31170== Command: /home/eacousineau/.cache/bazel/_bazel_eacousineau/4bfeaeef7a21f92da79b50fef77b3ca6/execroot/repro/bazel-out/clang-3.9-linux-dbg/bin/bug/eigen_resize_dtor/conservative_resize_issue
==31170== 
==31170== 
==31170== HEAP SUMMARY:
==31170==     in use at exit: 72,704 bytes in 1 blocks
==31170==   total heap usage: 7 allocs, 6 frees, 72,988 bytes allocated
==31170== 
==31170== LEAK SUMMARY:
==31170==    definitely lost: 0 bytes in 0 blocks
==31170==    indirectly lost: 0 bytes in 0 blocks
==31170==      possibly lost: 0 bytes in 0 blocks
==31170==    still reachable: 72,704 bytes in 1 blocks
==31170==         suppressed: 0 bytes in 0 blocks
==31170== Rerun with --leak-check=full to see details of leaked memory
==31170== 
==31170== For counts of detected and suppressed errors, rerun with: -v
==31170== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)