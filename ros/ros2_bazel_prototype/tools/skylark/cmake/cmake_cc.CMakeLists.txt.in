# Generated by Bazel.
cmake_minimum_required(VERSION 3.5)
project(@NAME@)

find_package(ament_cmake REQUIRED)

foreach(pkg @PACKAGES@)
  find_package(${pkg} REQUIRED)
endforeach()

# TODO: Can Bazel `cmake_external` be taught to parse CMake interface targets
# and consume their include info?
# Maybe? https://answers.ros.org/question/305991/how-to-cleanly-handle-dependencies-in-ament/
# https://github.com/dirk-thomas/ament_examples/blob/75d6209e4e2db33ad957a2abd1a3a7e102068863/example/CMakeLists.txt

add_library(@NAME@ SHARED empty.cc)
ament_target_dependencies(@NAME@ @PACKAGES@)

# Generate output via configuration.
set(props_file "${CMAKE_CURRENT_BINARY_DIR}/props.txt")
file(WRITE ${props_file} "")

# Extract variables, write to file.
foreach(prop @PROPERTIES@)
  get_target_property(value @NAME@ ${prop})
  if(value STREQUAL "value-NOTFOUND")
    set(value)
  endif()
  file(APPEND ${props_file} "${prop}=${value}\n")
endforeach()
